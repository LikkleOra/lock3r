(()=>{var e={};e.id=682,e.ids=[682],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4626:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>i});var r=s(482),a=s(9108),l=s(2563),o=s.n(l),n=s(8300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let i=["",{children:["block-list",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,621)),"/workspaces/lock3r/src/app/block-list/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4256)),"/workspaces/lock3r/src/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,4117)),"/workspaces/lock3r/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,8206)),"/workspaces/lock3r/src/app/not-found.tsx"]}],d=["/workspaces/lock3r/src/app/block-list/page.tsx"],u="/block-list/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/block-list/page",pathname:"/block-list",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},5487:(e,t,s)=>{Promise.resolve().then(s.bind(s,1486)),Promise.resolve().then(s.bind(s,8439))},1486:(e,t,s)=>{"use strict";s.r(t),s.d(t,{BlockManager:()=>d});var r=s(2295),a=s(3729),l=s(3737);function o({onAdd:e}){let[t,s]=(0,a.useState)(""),[l,o]=(0,a.useState)(!1),[n,c]=(0,a.useState)(!1),i=async r=>{if(r.preventDefault(),t.trim()){c(!0);try{await e(t.trim(),l),s(""),o(!1)}finally{c(!1)}}};return(0,r.jsxs)("form",{onSubmit:i,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Enter URL or domain (e.g., facebook.com)",value:t,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-input rounded-md bg-background",disabled:n})}),r.jsx("button",{type:"submit",disabled:!t.trim()||n,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50",children:n?"Adding...":"Add Block"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"permanent",checked:l,onChange:e=>o(e.target.checked),className:"rounded border-input",disabled:n}),r.jsx("label",{htmlFor:"permanent",className:"text-sm text-muted-foreground",children:"Permanent block (requires challenge to unlock)"})]})]})}function n({blocks:e}){let t=e.length,s=e.filter(e=>e.isPermanent).length,a=e.filter(e=>e.category).length;return(0,r.jsxs)("div",{className:"bg-card border rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Block Statistics"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[{label:"Total Blocks",value:t,color:"text-blue-600"},{label:"Permanent",value:s,color:"text-orange-600"},{label:"Temporary",value:t-s,color:"text-green-600"},{label:"Categorized",value:a,color:"text-purple-600"}].map(e=>(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:`text-2xl font-bold ${e.color}`,children:e.value}),r.jsx("div",{className:"text-sm text-muted-foreground",children:e.label})]},e.label))})]})}var c=s(2471);function i({syncStatus:e,lastSyncTime:t,onForceSync:s}){if(!(0,c.uu)())return(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),r.jsx("span",{children:"Local storage only"})]});let a=e=>{if(!e)return"Never";let t=Date.now()-e;return t<6e4?"Just now":t<36e5?`${Math.floor(t/6e4)}m ago`:t<864e5?`${Math.floor(t/36e5)}h ago`:`${Math.floor(t/864e5)}d ago`};return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(()=>{switch(e){case"syncing":return r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"});case"error":return r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"});default:return r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})}})(),r.jsx("span",{className:`text-sm ${(()=>{switch(e){case"syncing":return"text-blue-600";case"error":return"text-red-600";default:return"text-green-600"}})()}`,children:(()=>{switch(e){case"syncing":return"Syncing...";case"error":return"Sync failed";default:return`Synced ${a(t)}`}})()})]}),r.jsx("button",{onClick:s,disabled:"syncing"===e,className:"text-sm text-muted-foreground hover:text-foreground disabled:opacity-50 disabled:cursor-not-allowed",children:"syncing"===e?"Syncing...":"Sync now"})]})}function d(){let{blocks:e,isLoading:t,error:s,addBlock:c,removeBlock:d,togglePermanent:m,stats:x,syncStatus:g,lastSyncTime:p,forceSync:b}=(0,l.Q)(),[h,k]=(0,a.useState)(""),f=e.filter(e=>e.url.toLowerCase().includes(h.toLowerCase())||e.category&&e.category.toLowerCase().includes(h.toLowerCase()));return t?r.jsx("div",{className:"flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading blocks..."})]})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Block List"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage websites you want to block during focus sessions"})]}),r.jsx(i,{syncStatus:g,lastSyncTime:p,onForceSync:b})]}),s&&r.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:r.jsx("p",{className:"text-destructive text-sm",children:s})}),(0,r.jsxs)("div",{className:"bg-card border rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Add New Block"}),r.jsx(o,{onAdd:c})]}),e.length>0&&r.jsx("div",{className:"bg-card border rounded-lg p-4",children:r.jsx("input",{type:"text",placeholder:"Search blocks...",value:h,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-input rounded-md bg-background"})}),r.jsx("div",{className:"bg-card border rounded-lg",children:0===f.length?r.jsx("div",{className:"p-8 text-center",children:r.jsx("p",{className:"text-muted-foreground",children:0===e.length?"No blocks added yet. Add your first blocked site above.":"No blocks match your search criteria."})}):r.jsx("div",{className:"divide-y",children:f.map(e=>r.jsx(u,{item:e,onRemove:d,onTogglePermanent:m},e.id))})}),e.length>0&&r.jsx(n,{blocks:e})]})}function u({item:e,onRemove:t,onTogglePermanent:s}){let[l,o]=(0,a.useState)(!1);return r.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-medium truncate",children:e.url}),e.isPermanent&&r.jsx("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded-full",children:"Permanent"})]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Added ",new Date(e.createdAt).toLocaleDateString()]}),e.category&&r.jsx("span",{className:"inline-block mt-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:e.category})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[r.jsx("button",{onClick:()=>s(e.id),className:"px-3 py-1 text-sm border rounded-md hover:bg-muted transition-colors",children:e.isPermanent?"Make Temporary":"Make Permanent"}),l?(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{t(e.id),o(!1)},className:"px-3 py-1 text-sm bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90",children:"Confirm"}),r.jsx("button",{onClick:()=>o(!1),className:"px-3 py-1 text-sm border rounded-md hover:bg-muted",children:"Cancel"})]}):r.jsx("button",{onClick:()=>o(!0),className:"px-3 py-1 text-sm text-destructive border border-destructive/20 rounded-md hover:bg-destructive/10 transition-colors",children:"Remove"})]})]})})}},8439:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Breadcrumbs:()=>d});var r=s(2295),a=s(3729),l=s.n(a),o=s(783),n=s.n(o),c=s(2254);let i={"/":"Dashboard","/focus":"Focus Session","/block-list":"Block List","/analytics":"Analytics","/settings":"Settings"};function d(){let e=(0,c.usePathname)();if("/"===e)return null;let t=e.split("/").filter(Boolean),s=[{name:"Dashboard",href:"/"},...t.map((e,s)=>{let r="/"+t.slice(0,s+1).join("/");return{name:i[r]||e.charAt(0).toUpperCase()+e.slice(1),href:r}})];return r.jsx("nav",{className:"flex items-center space-x-2 text-sm text-muted-foreground mb-6",children:s.map((e,t)=>(0,r.jsxs)(l().Fragment,{children:[t>0&&r.jsx("span",{children:"/"}),t===s.length-1?r.jsx("span",{className:"text-foreground font-medium",children:e.name}):r.jsx(n(),{href:e.href,className:"hover:text-foreground transition-colors",children:e.name})]},e.href))})}},3737:(e,t,s)=>{"use strict";s.d(t,{Q:()=>c});var r=s(3729),a=s(3543),l=s(441);let o={blocks:{getBlockList:"blocks:getBlockList",saveBlockList:"blocks:saveBlockList",addBlockItem:"blocks:addBlockItem",removeBlockItem:"blocks:removeBlockItem",togglePermanentBlock:"blocks:togglePermanentBlock",updateBlockItemAccess:"blocks:updateBlockItemAccess",isUrlBlocked:"blocks:isUrlBlocked",getBlockStats:"blocks:getBlockStats"}};var n=s(2471);function c(){let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),[u,m]=(0,r.useState)("idle"),[x,g]=(0,r.useState)(null),p=function(e){let t=(0,n.uu)()?(0,l.aM)(o.blocks.getBlockList,{userId:e}):null,s=(0,n.uu)()?(0,l.aM)(o.blocks.getBlockStats,{userId:e}):null,r=(0,l.Db)(o.blocks.saveBlockList),a=(0,l.Db)(o.blocks.addBlockItem),c=(0,l.Db)(o.blocks.removeBlockItem),i=(0,l.Db)(o.blocks.togglePermanentBlock),d=(0,l.Db)(o.blocks.updateBlockItemAccess);return{blockList:t,blockStats:s,saveBlockList:t=>(0,n.uu)()?r({userId:e,items:t}):Promise.resolve(null),addBlock:(t,s,r)=>(0,n.uu)()?a({userId:e,url:t,isPermanent:s,category:r}):Promise.resolve(null),removeBlock:t=>(0,n.uu)()?c({userId:e,itemId:t}):Promise.resolve(null),togglePermanent:t=>(0,n.uu)()?i({userId:e,itemId:t}):Promise.resolve(null),updateAccess:t=>(0,n.uu)()?d({userId:e,itemId:t}):Promise.resolve(null),isBlocked:t=>(0,n.uu)()?(0,l.aM)(o.blocks.isUrlBlocked,{userId:e,url:t}):null}}("default_user"),b=(0,r.useCallback)(async()=>{try{c(!0),d(null);let e=await a.e.getBlockList();t(e)}catch(e){d(e instanceof Error?e.message:"Failed to load blocks"),console.error("Failed to load local blocks:",e)}finally{c(!1)}},[]),h=(0,r.useCallback)(async()=>{if((0,n.uu)())try{m("syncing");let e=await a.e.getBlockList();await p.saveBlockList(e),g(Date.now()),m("idle")}catch(e){console.error("Sync with Convex failed:",e),m("error")}},[p]);(0,r.useEffect)(()=>{b()},[b]),(0,r.useEffect)(()=>{if(!(0,n.uu)())return;let e=setInterval(h,3e5);return()=>clearInterval(e)},[h]);let k=(0,r.useCallback)(async(e,t=!1,s)=>{try{if(d(null),await a.e.addBlockItem(e,t),s){let t=(await a.e.getBlockList()).find(t=>t.url===e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,""));t&&await a.e.updateItemCategory(t.id,s)}await b(),(0,n.uu)()&&await h()}catch(e){throw d(e instanceof Error?e.message:"Failed to add block"),e}},[b,h]),f=(0,r.useCallback)(async e=>{try{d(null),await a.e.removeBlockItem(e),await b(),(0,n.uu)()&&await h()}catch(e){throw d(e instanceof Error?e.message:"Failed to remove block"),e}},[b,h]),v=(0,r.useCallback)(async e=>{try{d(null),await a.e.togglePermanentBlock(e),await b(),(0,n.uu)()&&await h()}catch(e){throw d(e instanceof Error?e.message:"Failed to update block"),e}},[b,h]),y=(0,r.useCallback)(async(e,t)=>{try{d(null),await a.e.updateItemCategory(e,t),await b(),(0,n.uu)()&&await h()}catch(e){throw d(e instanceof Error?e.message:"Failed to update category"),e}},[b,h]),j=(0,r.useCallback)(async e=>{try{return await a.e.isBlocked(e)}catch(e){return console.error("Failed to check if URL is blocked:",e),!1}},[]),w=(0,r.useCallback)(async()=>{(0,n.uu)()&&await h()},[h]),N={totalBlocks:e.length,permanentBlocks:e.filter(e=>e.isPermanent).length,temporaryBlocks:e.filter(e=>!e.isPermanent).length,categorizedBlocks:e.filter(e=>e.category).length};return{blocks:e,isLoading:s,error:i,addBlock:k,removeBlock:f,togglePermanent:v,updateCategory:y,isBlocked:j,stats:N,syncStatus:u,lastSyncTime:x,forceSync:w}}},2471:(e,t,s)=>{"use strict";s.d(t,{uu:()=>l});var r=s(441);let a=process.env.NEXT_PUBLIC_CONVEX_URL||"https://mock-convex-url.convex.cloud";function l(){return!!process.env.NEXT_PUBLIC_CONVEX_URL&&"https://mock-convex-url.convex.cloud"!==process.env.NEXT_PUBLIC_CONVEX_URL}new r.Zj(a)},621:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(5036),a=s(6843);let l=(0,a.createProxy)(String.raw`/workspaces/lock3r/src/components/blocks/BlockManager.tsx`),{__esModule:o,$$typeof:n}=l;l.default;let c=(0,a.createProxy)(String.raw`/workspaces/lock3r/src/components/blocks/BlockManager.tsx#BlockManager`),i=(0,a.createProxy)(String.raw`/workspaces/lock3r/src/components/navigation/Breadcrumbs.tsx`),{__esModule:d,$$typeof:u}=i;i.default;let m=(0,a.createProxy)(String.raw`/workspaces/lock3r/src/components/navigation/Breadcrumbs.tsx#Breadcrumbs`);function x(){return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[r.jsx(m,{}),r.jsx(c,{})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[349,441,257],()=>s(4626));module.exports=r})();