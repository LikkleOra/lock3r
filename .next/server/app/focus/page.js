(()=>{var e={};e.id=352,e.ids=[352],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2909:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>i});var r=t(482),a=t(9108),l=t(2563),o=t.n(l),n=t(8300),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let i=["",{children:["focus",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,635)),"/workspaces/lock3r/src/app/focus/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4256)),"/workspaces/lock3r/src/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,4117)),"/workspaces/lock3r/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,8206)),"/workspaces/lock3r/src/app/not-found.tsx"]}],d=["/workspaces/lock3r/src/app/focus/page.tsx"],u="/focus/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/focus/page",pathname:"/focus",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},8111:(e,s,t)=>{Promise.resolve().then(t.bind(t,5386))},5386:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(2295),a=t(3729),l=t(1038),o=t(3737),n=t(1453);function c({session:e,onPause:s,onResume:t,onEnd:l}){let[o,c]=(0,a.useState)(0),[i,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let s=()=>{let s=Date.now(),t=Math.max(0,e.endTime-s);c(t),0===t&&e.isActive&&l()},t=e.breaks[e.breaks.length-1];d(!!t&&!t.endTime),s();let r=setInterval(s,1e3);return()=>clearInterval(r)},[e,l]);let u=e.completedPercentage,m=2*Math.PI*90;return(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-6 p-8",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("svg",{className:"w-64 h-64 transform -rotate-90",viewBox:"0 0 200 200",children:[r.jsx("circle",{cx:"100",cy:"100",r:"90",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-muted"}),r.jsx("circle",{cx:"100",cy:"100",r:"90",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:m,strokeDashoffset:m-u/100*m,className:`transition-all duration-1000 ${i?"text-orange-500":"text-primary"}`,strokeLinecap:"round"})]}),(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx("div",{className:"text-4xl font-bold text-foreground",children:(0,n.LU)(o)}),r.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:i?"Paused":"Remaining"})]})]}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Focus Session"}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-4 text-sm text-muted-foreground",children:[(0,r.jsxs)("span",{children:[u,"% Complete"]}),r.jsx("span",{children:"â€¢"}),(0,r.jsxs)("span",{children:[e.breaks.length," breaks taken"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[i?r.jsx("button",{onClick:()=>{t()},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Resume"}):r.jsx("button",{onClick:()=>{s("User requested break")},className:"px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Take Break"}),r.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to end this focus session?")&&l()},className:"px-6 py-3 bg-destructive text-destructive-foreground rounded-lg hover:bg-destructive/90 transition-colors",children:"End Session"})]}),e.breaks.length>0&&(0,r.jsxs)("div",{className:"w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-medium mb-3",children:"Breaks Taken"}),r.jsx("div",{className:"space-y-2",children:e.breaks.map((e,s)=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-muted rounded-lg",children:[(0,r.jsxs)("span",{className:"text-sm",children:["Break ",s+1,e.reason&&`: ${e.reason}`]}),r.jsx("span",{className:"text-sm text-muted-foreground",children:e.endTime?(0,n.LU)(e.endTime-e.startTime):"Ongoing"})]},e.id))})]})]})}var i=t(1472);let d=[{label:"15 minutes",value:9e5},{label:"25 minutes (Pomodoro)",value:15e5},{label:"45 minutes",value:27e5},{label:"1 hour",value:36e5},{label:"2 hours",value:72e5}];function u({onStart:e,isLoading:s=!1}){let[t,l]=(0,a.useState)(i.ub.DEFAULT_DURATION),[o,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),x=()=>{let e=parseInt(o);return isNaN(e)||e<=0?i.ub.DEFAULT_DURATION:6e4*e},p=()=>u?x():t;return(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-6 p-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Start Focus Session"}),r.jsx("p",{className:"text-muted-foreground",children:"Choose your focus duration and begin your productive session"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Quick Start"}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:d.map(e=>(0,r.jsxs)("button",{onClick:()=>{l(e.value),m(!1)},className:`p-3 text-left border rounded-lg transition-colors ${u||t!==e.value?"border-border hover:bg-muted":"border-primary bg-primary/10 text-primary"}`,children:[r.jsx("div",{className:"font-medium",children:e.label}),r.jsx("div",{className:"text-sm text-muted-foreground",children:(0,n.LU)(e.value)})]},e.value))})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Custom Duration"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"number",placeholder:"Minutes",value:o,onChange:e=>{c(e.target.value),m(!0)},onFocus:()=>m(!0),className:`flex-1 px-3 py-2 border rounded-md bg-background ${u?"border-primary":"border-border"}`,min:i.ub.MIN_DURATION/6e4,max:i.ub.MAX_DURATION/6e4}),r.jsx("span",{className:"text-muted-foreground",children:"minutes"})]}),u&&o&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Duration: ",(0,n.LU)(x())]})]}),(0,r.jsxs)("div",{className:"bg-muted/50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Session Preview"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{children:["Duration: ",(0,n.LU)(p())]}),(0,r.jsxs)("div",{children:["Estimated end time:"," ",new Date(Date.now()+p()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),r.jsx("button",{onClick:()=>{let s=u?x():t;if(s<i.ub.MIN_DURATION||s>i.ub.MAX_DURATION){alert(`Duration must be between ${i.ub.MIN_DURATION/6e4} minutes and ${i.ub.MAX_DURATION/36e5} hours`);return}e(s)},disabled:s,className:"w-full py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:s?"Starting Session...":"Start Focus Session"}),r.jsx("div",{className:"text-center text-sm text-muted-foreground",children:r.jsx("p",{children:"\uD83D\uDCA1 Tip: During your session, blocked sites will be inaccessible"})})]})}var m=t(8439);function x(){let{activeSession:e,isLoading:s,error:t,startSession:a,endSession:n,pauseSession:i,resumeSession:d,isSessionActive:x}=(0,l.k)(),{stats:p}=(0,o.Q)();return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[r.jsx(m.Breadcrumbs,{}),(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Focus Session"}),r.jsx("p",{className:"text-muted-foreground",children:"Start a focused work session and block distracting websites"})]}),(x||p.permanentBlocks>0)&&(0,r.jsxs)("div",{className:"mb-6 space-y-3",children:[x&&r.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-pulse"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-primary",children:"Focus Session Active"}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[p.temporaryBlocks," sites blocked during session"]})]})]})}),p.permanentBlocks>0&&r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-orange-800",children:"Permanent Blocks Active"}),(0,r.jsxs)("div",{className:"text-sm text-orange-600",children:[p.permanentBlocks," sites permanently blocked"]})]})]})})]}),t&&r.jsx("div",{className:"mb-6 bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:r.jsx("p",{className:"text-destructive text-sm",children:t})}),r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsx("div",{className:"bg-card border rounded-lg p-6",children:e&&e.isActive?r.jsx(c,{session:e,onPause:i,onResume:d,onEnd:n}):r.jsx(u,{onStart:a,isLoading:s})})})]})}},8439:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Breadcrumbs:()=>d});var r=t(2295),a=t(3729),l=t.n(a),o=t(783),n=t.n(o),c=t(2254);let i={"/":"Dashboard","/focus":"Focus Session","/block-list":"Block List","/analytics":"Analytics","/settings":"Settings"};function d(){let e=(0,c.usePathname)();if("/"===e)return null;let s=e.split("/").filter(Boolean),t=[{name:"Dashboard",href:"/"},...s.map((e,t)=>{let r="/"+s.slice(0,t+1).join("/");return{name:i[r]||e.charAt(0).toUpperCase()+e.slice(1),href:r}})];return r.jsx("nav",{className:"flex items-center space-x-2 text-sm text-muted-foreground mb-6",children:t.map((e,s)=>(0,r.jsxs)(l().Fragment,{children:[s>0&&r.jsx("span",{children:"/"}),s===t.length-1?r.jsx("span",{className:"text-foreground font-medium",children:e.name}):r.jsx(n(),{href:e.href,className:"hover:text-foreground transition-colors",children:e.name})]},e.href))})}},3737:(e,s,t)=>{"use strict";t.d(s,{Q:()=>c});var r=t(3729),a=t(3543),l=t(441);let o={blocks:{getBlockList:"blocks:getBlockList",saveBlockList:"blocks:saveBlockList",addBlockItem:"blocks:addBlockItem",removeBlockItem:"blocks:removeBlockItem",togglePermanentBlock:"blocks:togglePermanentBlock",updateBlockItemAccess:"blocks:updateBlockItemAccess",isUrlBlocked:"blocks:isUrlBlocked",getBlockStats:"blocks:getBlockStats"}};var n=t(2471);function c(){let[e,s]=(0,r.useState)([]),[t,c]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),[u,m]=(0,r.useState)("idle"),[x,p]=(0,r.useState)(null),h=function(e){let s=(0,n.uu)()?(0,l.aM)(o.blocks.getBlockList,{userId:e}):null,t=(0,n.uu)()?(0,l.aM)(o.blocks.getBlockStats,{userId:e}):null,r=(0,l.Db)(o.blocks.saveBlockList),a=(0,l.Db)(o.blocks.addBlockItem),c=(0,l.Db)(o.blocks.removeBlockItem),i=(0,l.Db)(o.blocks.togglePermanentBlock),d=(0,l.Db)(o.blocks.updateBlockItemAccess);return{blockList:s,blockStats:t,saveBlockList:s=>(0,n.uu)()?r({userId:e,items:s}):Promise.resolve(null),addBlock:(s,t,r)=>(0,n.uu)()?a({userId:e,url:s,isPermanent:t,category:r}):Promise.resolve(null),removeBlock:s=>(0,n.uu)()?c({userId:e,itemId:s}):Promise.resolve(null),togglePermanent:s=>(0,n.uu)()?i({userId:e,itemId:s}):Promise.resolve(null),updateAccess:s=>(0,n.uu)()?d({userId:e,itemId:s}):Promise.resolve(null),isBlocked:s=>(0,n.uu)()?(0,l.aM)(o.blocks.isUrlBlocked,{userId:e,url:s}):null}}("default_user"),g=(0,r.useCallback)(async()=>{try{c(!0),d(null);let e=await a.e.getBlockList();s(e)}catch(e){d(e instanceof Error?e.message:"Failed to load blocks"),console.error("Failed to load local blocks:",e)}finally{c(!1)}},[]),b=(0,r.useCallback)(async()=>{if((0,n.uu)())try{m("syncing");let e=await a.e.getBlockList();await h.saveBlockList(e),p(Date.now()),m("idle")}catch(e){console.error("Sync with Convex failed:",e),m("error")}},[h]);(0,r.useEffect)(()=>{g()},[g]),(0,r.useEffect)(()=>{if(!(0,n.uu)())return;let e=setInterval(b,3e5);return()=>clearInterval(e)},[b]);let k=(0,r.useCallback)(async(e,s=!1,t)=>{try{if(d(null),await a.e.addBlockItem(e,s),t){let s=(await a.e.getBlockList()).find(s=>s.url===e.toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,""));s&&await a.e.updateItemCategory(s.id,t)}await g(),(0,n.uu)()&&await b()}catch(e){throw d(e instanceof Error?e.message:"Failed to add block"),e}},[g,b]),v=(0,r.useCallback)(async e=>{try{d(null),await a.e.removeBlockItem(e),await g(),(0,n.uu)()&&await b()}catch(e){throw d(e instanceof Error?e.message:"Failed to remove block"),e}},[g,b]),f=(0,r.useCallback)(async e=>{try{d(null),await a.e.togglePermanentBlock(e),await g(),(0,n.uu)()&&await b()}catch(e){throw d(e instanceof Error?e.message:"Failed to update block"),e}},[g,b]),j=(0,r.useCallback)(async(e,s)=>{try{d(null),await a.e.updateItemCategory(e,s),await g(),(0,n.uu)()&&await b()}catch(e){throw d(e instanceof Error?e.message:"Failed to update category"),e}},[g,b]),N=(0,r.useCallback)(async e=>{try{return await a.e.isBlocked(e)}catch(e){return console.error("Failed to check if URL is blocked:",e),!1}},[]),y=(0,r.useCallback)(async()=>{(0,n.uu)()&&await b()},[b]),w={totalBlocks:e.length,permanentBlocks:e.filter(e=>e.isPermanent).length,temporaryBlocks:e.filter(e=>!e.isPermanent).length,categorizedBlocks:e.filter(e=>e.category).length};return{blocks:e,isLoading:t,error:i,addBlock:k,removeBlock:v,togglePermanent:f,updateCategory:j,isBlocked:N,stats:w,syncStatus:u,lastSyncTime:x,forceSync:y}}},2471:(e,s,t)=>{"use strict";t.d(s,{uu:()=>l});var r=t(441);let a=process.env.NEXT_PUBLIC_CONVEX_URL||"https://mock-convex-url.convex.cloud";function l(){return!!process.env.NEXT_PUBLIC_CONVEX_URL&&"https://mock-convex-url.convex.cloud"!==process.env.NEXT_PUBLIC_CONVEX_URL}new r.Zj(a)},635:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>o});let r=(0,t(6843).createProxy)(String.raw`/workspaces/lock3r/src/app/focus/page.tsx`),{__esModule:a,$$typeof:l}=r,o=r.default}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[349,441,257],()=>t(2909));module.exports=r})();